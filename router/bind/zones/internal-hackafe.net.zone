
{%- set zone_domain = 'hackafe.net' -%}
$TTL 3600
; hackafe.net
@ IN SOA vegafive.hackafe.net. mark.hackafe.net. (
	2016010821  ; Serial
	28800      ; Refresh
	1800       ; Retry
	604800     ; Expire - 1 week
	86400 )    ; Minimum
		IN	NS	vegafive
vegafive	IN	A	192.168.0.1
localhost	IN	A	127.0.0.1
hackafe.net.	IN	A	192.168.2.42
isitmagstockyet.com IN A 192.168.2.42
@		IN	MX	1 aspmx.l.google.com.
@		IN	MX	5 alt1.aspmx.l.google.com.
@		IN	MX	5 alt2.aspmx.l.google.com.
@		IN	MX	10 alt3.aspmx.l.google.com.
@		IN	MX	10 alt4.aspmx.l.google.com.

@		IN	SPF	"v=spf1 include:_spf.google.com ~all"
@		IN	TXT	"v=spf1 include:_spf.google.com ~all"

calendar	IN	CNAME	ghs.googlehosted.com.
docs		IN	CNAME	ghs.googlehosted.com.
drive		IN	CNAME	ghs.googlehosted.com.
groups		IN	CNAME	ghs.googlehosted.com.
hangouts	IN	CNAME	ghs.googlehosted.com.
plus		IN	CNAME	ghs.googlehosted.com.
sheets		IN	CNAME	ghs.googlehosted.com.
sites		IN	CNAME	ghs.googlehosted.com.
slides		IN	CNAME	ghs.googlehosted.com.
start		IN	CNAME	ghs.googlehosted.com.
vault		IN	CNAME	ghs.googlehosted.com.

google._domain_key IN	TXT	"v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC/fTOEJdChhNCIWJ/BCUzqbDvOx1VhuhyftD/FgqShdzbfeEuzzVb9pYYr8QMFcs8CUABUhQRttC9j7CeFwalyXWQW1/4Cr7xcjYSTxJ4IKJJ9Cbfb0ZE+tK8Ob/WZodkKkxjimxjkdwsTzFiuli1LAwy4Uf7GA5uBsl9n/bju0wIDAQAB"

{%- set dns_defaults = salt['pillar.get']('dns:defaults') -%}
{%- for name, network in salt['pillar.get']('dns:networks').items() %}
; {{ name }}
{%- set net_domain = salt['pillar.get']('dns:networks:' + name + ':options:domain-name', salt['pillar.get']('dns:defaults:options:domain-name')) %}
; {{ net_domain }}
{%- if net_domain == zone_domain -%}
{%- for hostname, attrs in salt['pillar.get']('dns:networks:' + name + ':hosts', {}).items() %}
{{ hostname }}	  	IN	A	{{ attrs['ip'] }}
{%- endfor -%}
{%- endif -%}
{%- endfor -%}
